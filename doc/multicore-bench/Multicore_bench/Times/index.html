<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Times (multicore-bench.Multicore_bench.Times)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../../';
let search_urls = ['../../db.js','../../../sherlodoc.js'];
</script><script src="../../../odoc.support/odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">multicore-bench</a> &#x00BB; <a href="../index.html">Multicore_bench</a> &#x00BB; Times</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="ðŸ”Ž Search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Multicore_bench.Times</span></code></h1><p>Recording timings of benchmarks running on multiple domains in parallel and producing metrics from the recorded timings.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>Represents a record of elapsed times of multiple runs of a benchmark running on multiple domains.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-record"><a href="#val-record" class="anchor"></a><code><span><span class="keyword">val</span> record : 
  <span><span class="label">budgetf</span>:float <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">n_domains</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?ensure_multi_domain</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?domain_local_await</span>:<span>[&lt; `Busy_wait <span>| `Neglect</span> Busy_wait ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?n_warmups</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?n_runs_min</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?n_runs_max</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?before</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">init</span>:<span>(<span>int <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'s</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?wrap</span>:<span>(<span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'s</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">work</span>:<span>(<span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'s</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?after</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>record ~budgetf ~n_domains ~init ~work ()</code> essentially repeatedly runs <code>let x = init i in wrap i x (fun () -&gt; .. work i x ..)</code> on specified number of domains, <code>i âˆŠ [0, n_domains-1]</code>, and records the times that calls of <code>work</code> take. The calls of <code>work</code> are synchronized to start as simultaneously as possible.</p><p>Optional arguments:</p><ul><li><code>~ensure_multi_domain</code>: Whether to run an extra busy untimed domain when <code>n_domains</code> is <code>1</code>. Doing so prevents the OCaml runtime from using specialized runtime implementations. Defaults to <code>true</code>.</li></ul><ul><li><code>~domain_local_await</code>: Specifies whether and how to configure <a href="https://github.com/ocaml-multicore/domain-local-await/">domain-local-await</a> or DLA. <code>`Neglect</code> does not reconfigure DLA. <code>`Busy_wait</code> configures DLA to use a busy-wait implementation, which prevents domains from going to sleep. Defaults to <code>`Busy_wait</code>.</li></ul><ul><li><code>~n_warmups</code>: Specifies the number of warmup runs to perform before the actual measurements. Defaults to <code>3</code>.</li></ul><ul><li><code>~n_runs_min</code>: Specifies the minimum number of timed runs. The upper bound is determined dynamically based on <code>budgetf</code>. Defaults to <code>7</code>.</li></ul><ul><li><code>~n_runs_max</code>: Specifies the maximum number of timed runs. Defaults to <code>1023</code>.</li></ul><ul><li><code>~before</code>: Specifies an action to run on one domain before <code>init</code>.</li></ul><ul><li><code>~after</code>: Specifies an action to run on one domain after <code>work</code>.</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_thruput_metrics"><a href="#val-to_thruput_metrics" class="anchor"></a><code><span><span class="keyword">val</span> to_thruput_metrics : 
  <span><span class="label">n</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">singular</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?plural</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">config</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?unit_of_time</span>:<a href="../Unit_of_time/index.html#type-t">Unit_of_time.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?unit_of_rate</span>:<a href="../Unit_of_rate/index.html#type-t">Unit_of_rate.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Metric/index.html#type-t">Metric.t</a> list</span></span></code></div><div class="spec-doc"><p><code>to_thruput_metrics ~n ~singular ~config times</code> produces a pair of metrics from the recorded <code>times</code> where one metric is for the time a single operation takes and the other is the thruput of operations over all domains.</p><p>Optional arguments:</p><ul><li><code>~plural</code>: Plural for the operation. Defaults to <code>singular + &quot;s&quot;</code>.</li></ul><ul><li><code>~unit_of_time</code>: Unit of time for the duration of a single operation. Defaults to <code>`ns</code>.</li></ul><ul><li><code>~unit_of_rate</code>: Unit of rate for the number of operations per second. Defaults to <code>`M</code>.</li></ul></div></div></div></body></html>
